<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹ Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1a0b2e 0%, #16213e 50%, #1e293b 100%);
            color: white;
            padding: 20px;
            direction: rtl;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        button {
            background: linear-gradient(135deg, #6c63ff 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 99, 255, 0.3);
        }
        .result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid;
        }
        .success {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
        }
        .error {
            background: rgba(239, 68, 68, 0.2);
            border-color: #ef4444;
        }
        .info {
            background: rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
        }
        input {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            direction: rtl;
            text-align: right;
        }
        input::placeholder {
            color: rgba(255, 255, 255, 0.6);
            direction: rtl;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
            <input type="text" id="test-fullname" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ø«Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ)" value="Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ">
            <input type="text" id="test-username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù…Ø«Ù„: ahmed123)" value="ahmed123">
            <input type="email" id="test-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ù…Ø«Ù„: ahmed@example.com)" value="ahmed@example.com">
            <input type="password" id="test-password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)" value="123456">
            
            <button onclick="testRegister()">ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
            <button onclick="testLogin()">ğŸ”‘ Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        </div>
        
        <div class="test-section">
            <h2>ğŸ” ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h2>
            <button onclick="checkStorage()">ğŸ“Š ÙØ­Øµ localStorage</button>
            <button onclick="clearStorage()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
        
        <div id="results"></div>
    </div>

    <script src="auth.js"></script>
    <script src="language-toggle.js"></script>
    <script>
        let authSystem;
        const resultsDiv = document.getElementById('results');

        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
            resultsDiv.appendChild(div);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            try {
                authSystem = new AuthSystem();
                addResult('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
                checkStorage();
            } catch (error) {
                addResult(`âŒ ÙØ´Ù„ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…: ${error.message}`, 'error');
            }
        });

        function testRegister() {
            try {
                const userData = {
                    fullName: document.getElementById('test-fullname').value,
                    username: document.getElementById('test-username').value,
                    email: document.getElementById('test-email').value,
                    password: document.getElementById('test-password').value
                };

                addResult(`ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userData.username}`, 'info');
                
                const result = authSystem.register(userData);
                addResult(`âœ… Ù†Ø¬Ø­ Ø§Ù„ØªØ³Ø¬ÙŠÙ„! ${result.message}`, 'success');
                
                // Generate new random user for next test
                const randomId = Math.floor(Math.random() * 1000);
                document.getElementById('test-username').value = `user${randomId}`;
                document.getElementById('test-email').value = `user${randomId}@example.com`;
                
                checkStorage();
                
            } catch (error) {
                addResult(`âŒ ÙØ´Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${error.message}`, 'error');
            }
        }

        function testLogin() {
            try {
                const credentials = {
                    username: document.getElementById('test-username').value,
                    password: document.getElementById('test-password').value
                };

                addResult(`ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ${credentials.username}`, 'info');
                
                const result = authSystem.login(credentials);
                addResult(`âœ… Ù†Ø¬Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„! ${result.message}`, 'success');
                addResult(`ğŸ‘¤ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ: ${result.user.fullName}`, 'success');
                
            } catch (error) {
                addResult(`âŒ ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ${error.message}`, 'error');
            }
        }

        function checkStorage() {
            const users = localStorage.getItem('courseApp_users');
            const currentUser = localStorage.getItem('courseApp_currentUser');
            
            addResult('ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ:', 'info');
            
            if (users) {
                const parsedUsers = JSON.parse(users);
                addResult(`ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†: ${parsedUsers.length}`, 'success');
                
                if (parsedUsers.length > 0) {
                    parsedUsers.forEach((user, index) => {
                        addResult(`${index + 1}. ${user.fullName} (${user.username}) - ${user.email}`, 'info');
                    });
                }
            } else {
                addResult('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø­ÙÙˆØ¸Ø©', 'error');
            }
            
            if (currentUser) {
                const user = JSON.parse(currentUser);
                addResult(`ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ: ${user.fullName}`, 'success');
            } else {
                addResult('â„¹ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹', 'info');
            }
        }

        function clearStorage() {
            localStorage.removeItem('courseApp_users');
            localStorage.removeItem('courseApp_currentUser');
            addResult('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage', 'info');
            
            // Reset auth system
            if (authSystem) {
                authSystem.users = [];
                authSystem.currentUser = null;
            }
        }
    </script>
</body>
</html>
